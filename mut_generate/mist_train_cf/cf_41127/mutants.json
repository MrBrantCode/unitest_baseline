{
  "task_id": "cf_41127",
  "entry_point": "create_pruning_mask",
  "mutant_count": 15,
  "mutants": [
    {
      "operator": "ROR",
      "lineno": 14,
      "original_line": "if num_weights_to_prune > 0:",
      "mutated_line": "if num_weights_to_prune >= 0:",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune >= 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "ROR",
      "lineno": 14,
      "original_line": "if num_weights_to_prune > 0:",
      "mutated_line": "if num_weights_to_prune <= 0:",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune <= 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "ROR",
      "lineno": 14,
      "original_line": "if num_weights_to_prune > 0:",
      "mutated_line": "if num_weights_to_prune != 0:",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune != 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "CRP",
      "lineno": 14,
      "original_line": "if num_weights_to_prune > 0:",
      "mutated_line": "if num_weights_to_prune > 1:",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune > 1:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "CRP",
      "lineno": 14,
      "original_line": "if num_weights_to_prune > 0:",
      "mutated_line": "if num_weights_to_prune > -1:",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune > -1:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "CRP",
      "lineno": 14,
      "original_line": "if num_weights_to_prune > 0:",
      "mutated_line": "if num_weights_to_prune > 1:",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune > 1:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "AOR",
      "lineno": 10,
      "original_line": "num_weights_to_prune = int(pruning_rate * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate / len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate / len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "AOR",
      "lineno": 10,
      "original_line": "num_weights_to_prune = int(pruning_rate * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate + len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate + len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "AOR",
      "lineno": 10,
      "original_line": "num_weights_to_prune = int(pruning_rate * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate ** len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate ** len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "AOR",
      "lineno": 12,
      "original_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) / len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) / len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "AOR",
      "lineno": 12,
      "original_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) + len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) + len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "AOR",
      "lineno": 12,
      "original_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) ** len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 0) ** len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "CRP",
      "lineno": 12,
      "original_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 1) * len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 1) * len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "CRP",
      "lineno": 12,
      "original_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, -1) * len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, -1) * len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    },
    {
      "operator": "CRP",
      "lineno": 12,
      "original_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 0) * len(saliency_weights))",
      "mutated_line": "num_weights_to_prune = int(pruning_rate.get(layer.name, 1) * len(saliency_weights))",
      "code": "def create_pruning_mask(model, pruning_rate, saliency_fn, mask=None, compare_fn=None):\n    if not mask:\n        mask = {}\n    for layer in model.layers:\n        saliency_weights = saliency_fn(layer)\n        sorted_indices = sorted(range(len(saliency_weights)), key=lambda i: abs(saliency_weights[i]))\n        if isinstance(pruning_rate, float):\n            num_weights_to_prune = int(pruning_rate * len(saliency_weights))\n        else:\n            num_weights_to_prune = int(pruning_rate.get(layer.name, 1) * len(saliency_weights))\n        if num_weights_to_prune > 0:\n            threshold = abs(saliency_weights[sorted_indices[num_weights_to_prune]])\n            mask[layer.name] = [compare_fn(saliency, threshold) for saliency in saliency_weights]\n    return mask"
    }
  ]
}